models:

  # ============================================================
  # ACTIVITY / TRANSACTION THINNING
  # Controls WHEN orders occur and how dense each month is
  # ============================================================
  activity:

    # As total rows approach this value, volatility scaling tapers off.
    # Higher value → large datasets stay more volatile
    # Lower value → large datasets become smoother
    size_scale_threshold: 50000

    # controls continuity of order volume (transactions per mont
    month_inertia: 0.7

    # Relative transaction intensity by calendar month.
    # Values >1 increase activity, <1 reduce activity.
    # Changing these reshapes the yearly sales curve.
    monthly_baseline:
      - 0.85  # Jan – post-holiday slowdown
      - 0.82  # Feb – shortest month, lowest activity
      - 0.95  # Mar – recovery begins
      - 1.00  # Apr – baseline
      - 1.05  # May – mild uplift
      - 1.10  # Jun – early summer increase
      - 1.08  # Jul – sustained activity
      - 1.00  # Aug – flat
      - 0.95  # Sep – slight dip
      - 1.05  # Oct – pre-holiday ramp
      - 1.12  # Nov – holiday spike
      - 1.10  # Dec – high but constrained

    volatility:
      # Month-to-month randomness in activity.
      # Higher → spikier months
      # Lower → smoother curves
      sigma: 0.15

    row_noise:
      # Row-level randomness when selecting which orders survive thinning.
      # Higher values create more uneven per-day density.
      sigma_small_dataset: 0.08
      sigma_large_dataset: 0.20

    bounds:
      # Threshold that decides which bounds/noise model is used.
      # Smaller datasets need tighter control to avoid extreme spikes.
      dataset_split_threshold: 30000

      # Hard clamps on per-month volume for small datasets.
      # Prevents unrealistic month collapse or explosions.
      small_dataset:
        low: 0.88
        high: 1.12

      # Looser bounds for large datasets where law of large numbers applies.
      large_dataset:
        low: 0.65
        high: 1.45

  # ============================================================
  # QUANTITY / BASKET SIZE
  # Controls HOW MANY units per order line
  # ============================================================
  quantity:

    # Base Poisson mean for units per order.
    # Higher → larger baskets everywhere
    # Lower → more single-item purchases
    base_poisson_lambda: 2.2

    # controls continuity of average basket size
    month_inertia: 0.75

    # Seasonal basket-size multipliers by month.
    # Impacts revenue without changing order counts.
    monthly_factors:
      - 0.97  # Jan
      - 0.96  # Feb
      - 0.98  # Mar
      - 1.00  # Apr
      - 1.01  # May
      - 1.02  # Jun
      - 1.02  # Jul
      - 1.01  # Aug
      - 1.00  # Sep
      - 1.03  # Oct
      - 1.05  # Nov – bulk buying
      - 1.04  # Dec – gifting

    # Additive noise on quantities.
    # Higher → more variety in order sizes
    noise_sd: 0.05

    # Absolute safety bounds.
    min_qty: 1
    max_qty: 4

  # ============================================================
  # CUSTOMER LIFECYCLE
  # Controls WHICH customers are active over time
  # ============================================================
  customers:

    # Initial fraction of customers active at simulation start.
    # Lower → sparse early months
    # Higher → dense initial activity
    base_active_rate: 0.30

    # Net annual growth of active customer pool.
    # Drives long-term upward trend in orders.
    annual_growth_rate: 0.24

    # Annual churn rate applied gradually.
    # Higher → more customer turnover
    annual_churn_rate: 0.40

    # Month-to-month randomness applied to churn & growth.
    # Higher → less predictable active customer counts
    monthly_noise: 0.05

    seasonal_growth_amplitude: 0.35   # 0 = no cycles, 0.4 = strong waves
    seasonal_period_months: 24       # 12 = yearly, 24 = 2-year cycles
    min_monthly_new_customers: 500    # acquisition floor

  # ============================================================
  # PRICING PIPELINE
  # Controls HOW MUCH revenue is generated per unit
  # ============================================================
  pricing:
    # controls continuity of average price level (not discounts)
    month_inertia: 0.7

    ramp:
      # Number of months before business reaches maturity pricing.
      # Shorter → prices stabilize sooner
      months: 18

      # Lower/upper bounds on early-stage price scaling.
      min_multiplier: 0.85
      max_multiplier: 1.05

      # Discount intensity during ramp-up phase.
      # Lower → aggressive early discounts
      discount_scale: 0.7

      # Randomness applied to discounts during ramp.
      discount_noise_sigma: 0.30

    inflation:
      # Annual price inflation rate.
      # Drives long-term revenue growth independent of volume.
      annual_rate: 0.035

      # Small randomness around inflation.
      # Prevents perfectly smooth year-over-year pricing.
      noise_sigma: 0.01

    seasonality:
      # Enable/disable price seasonality entirely.
      enabled: true

      # Strength of seasonal price swings.
      # Higher → visible monthly price changes
      amplitude: 0.01

      # Controls how sharp the seasonal response is.
      # Higher → flatter peaks, steeper transitions
      sharpness: 1.0

      # Month offset for seasonal peak.
      # -1 → peak around Nov/Dec
      phase_shift_months: -1

    discount:
      # Hard cap on discount as a fraction of unit price.
      # Prevents negative or near-zero net prices.
      max_pct_of_price: 0.90

    floors:
      # Absolute minimum net price per unit.
      # Safety against pathological combinations.
      min_net_price: 0.01

    cost:
      # Randomized cost ratio relative to net price.
      # Controls margin variability.
      cost_ratio_min: 0.60
      cost_ratio_max: 0.82

      # Minimum guaranteed margin.
      # Higher → safer profitability
      min_margin_pct: 0.05
