models:

  # ============================================================
  # ACTIVITY / TRANSACTION THINNING
  # Controls WHEN orders occur and how dense each month is
  # ============================================================
  activity:

    # As total rows approach this value, volatility scaling tapers off.
    # Higher value → large datasets stay more volatile
    # Lower value → large datasets become smoother
    size_scale_threshold: 50000

    # controls continuity of order volume (transactions per mont
    month_inertia: 0.90

    # Relative transaction intensity by calendar month.
    # Values >1 increase activity, <1 reduce activity.
    # Changing these reshapes the yearly sales curve.
    monthly_baseline:
      - 0.90  # Jan
      - 0.88  # Feb
      - 0.95  # Mar
      - 1.00  # Apr
      - 1.03  # May
      - 1.05  # Jun
      - 1.05  # Jul
      - 1.02  # Aug
      - 1.00  # Sep
      - 1.06  # Oct
      - 1.12  # Nov
      - 1.10  # Dec

    volatility:
      # Month-to-month randomness in activity.
      # Higher → spikier months
      # Lower → smoother curves
      sigma: 0.07

    row_noise:
      # Row-level randomness when selecting which orders survive thinning.
      # Higher values create more uneven per-day density.
      sigma_small_dataset: 0.10
      sigma_large_dataset: 0.35

    bounds:
      # Threshold that decides which bounds/noise model is used.
      # Smaller datasets need tighter control to avoid extreme spikes.
      dataset_split_threshold: 30000

      # Hard clamps on per-month volume for small datasets.
      # Prevents unrealistic month collapse or explosions.
      small_dataset:
        low: 0.90
        high: 1.10

      # Looser bounds for large datasets where law of large numbers applies.
      large_dataset:
        low: 0.70
        high: 1.25

  # ============================================================
  # QUANTITY / BASKET SIZE
  # Controls HOW MANY units per order line
  # ============================================================
  quantity:

    # Base Poisson mean for units per order.
    # Higher → larger baskets everywhere
    # Lower → more single-item purchases
    base_poisson_lambda: 2.0

    # controls continuity of average basket size
    month_inertia: 0.80

    # Seasonal basket-size multipliers by month.
    # Impacts revenue without changing order counts.
    monthly_factors:
      - 0.98
      - 0.97
      - 0.99
      - 1.00
      - 1.01
      - 1.02
      - 1.02
      - 1.01
      - 1.00
      - 1.03
      - 1.06
      - 1.05

    # Additive noise on quantities.
    # Higher → more variety in order sizes
    noise_sd: 0.06

    # Absolute safety bounds.
    min_qty: 1
    max_qty: 5

  # ============================================================
  # CUSTOMER LIFECYCLE
  # Controls WHICH customers are active over time
  # ============================================================
  customers:

    # Initial fraction of customers active at simulation start.
    # Lower → sparse early months
    # Higher → dense initial activity
    base_active_rate: 0.75

    # Net annual growth of active customer pool.
    # Drives long-term upward trend in orders.
    annual_growth_rate: 0.40

    # Annual churn rate applied gradually.
    # Higher → more customer turnover
    annual_churn_rate: 0.08

    # Month-to-month randomness applied to churn & growth.
    # Higher → less predictable active customer counts
    monthly_noise: 0.05

    seasonal_growth_amplitude: 0.40   # 0 = no cycles, 0.4 = strong waves
    seasonal_period_months: 24       # 12 = yearly, 24 = 2-year cycles
    min_monthly_new_customers: 509    # acquisition floor

  customer_discovery:
    # Base probability that an active-but-undiscovered customer
    # will place their FIRST order in a given month
    base_discovery_rate: 0.22

    # Strength of seasonal fluctuation in discovery
    # 0 = flat, 0.3–0.5 = visible waves
    seasonal_amplitude: 0.45

    # Length of the discovery cycle
    # 12 = yearly, 24 = multi-year adoption waves
    seasonal_period_months: 24

    # Hard safety bounds (prevents degenerate behavior)
    min_discovery_rate: 0.08
    max_discovery_rate: 0.80


  # ============================================================
  # PRICING PIPELINE
  # Controls HOW MUCH revenue is generated per unit
  # ============================================================
  pricing:
    # controls continuity of average price level (not discounts)
    month_inertia: 0.75

    ramp:
      # Number of months before business reaches maturity pricing.
      # Shorter → prices stabilize sooner
      months: 24

      # Lower/upper bounds on early-stage price scaling.
      min_multiplier: 0.90
      max_multiplier: 1.05

      # Discount intensity during ramp-up phase.
      # Lower → aggressive early discounts
      discount_scale: 0.80

      # Randomness applied to discounts during ramp.
      discount_noise_sigma: 0.25

    inflation:
      # Annual price inflation rate.
      # Drives long-term revenue growth independent of volume.
      annual_rate: 0.030

      # Small randomness around inflation.
      # Prevents perfectly smooth year-over-year pricing.
      noise_sigma: 0.01

    seasonality:
      # Enable/disable price seasonality entirely.
      enabled: true

      # Strength of seasonal price swings.
      # Higher → visible monthly price changes
      amplitude: 0.015

      # Controls how sharp the seasonal response is.
      # Higher → flatter peaks, steeper transitions
      sharpness: 1.0

      # Month offset for seasonal peak.
      # -1 → peak around Nov/Dec
      phase_shift_months: -1

    discount:
      # Hard cap on discount as a fraction of unit price.
      # Prevents negative or near-zero net prices.
      max_pct_of_price: 0.85

    floors:
      # Absolute minimum net price per unit.
      # Safety against pathological combinations.
      min_net_price: 0.01

    cost:
      # Randomized cost ratio relative to net price.
      # Controls margin variability.
      cost_ratio_min: 0.60
      cost_ratio_max: 0.82

      # Minimum guaranteed margin.
      # Higher → safer profitability
      min_margin_pct: 0.05
